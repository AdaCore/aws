2000-10-09  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb:
	(Send_Message): send Location field is needed.

	* aws-response.adb:
	(Acknowledge): add initialization for new Location field.
	(Authenticate): add initialization for new Location field.
	(Build): add initialization for new Location field.
	(Moved): new function.
	(File): add initialization for new Location field.
	(Location): return the Location field.
	
	* aws-response.ads:
	(Default_Moved_Message): new constant.
	(Moved): new function.
	(Data): Add field Location.

	* aws-messages.ads, aws-messages.adb:
	(Location): new function.

2000-10-08  Pascal Obry  <p.obry@wanadoo.fr>

	* makefile:
	(SOURCES): update list.
	(build): add build step for AWS.Parameters unit.

	* aws-client.adb:
	(Init_Connection): Host header data must reference the target
	 computer and not the proxy.
	Removes unused units.

	* aws-server-protocol_handler.adb:
	Fix bad casing and layout.

	* aws-server-config.ads:
	Fix bad casing.

	* aws-server-protocol_handler.adb:
	(Target_Filename): moved (one level up).
	(File_Upload): better way to check for file upload mode. Fix
	 algorithm to detect empty file upload parameter. Use new
	 Set_Parameter procedure.

	* aws-status.adb:
	Removes Ada.Text_IO (not used).
	(Set_Parameters): new procedure.

	* aws-status.ads:
	Minor reformating.
	(Set_Parameters): new procedure.

2000-10-04  Pascal Obry  <p.obry@wanadoo.fr>

	* aws.ads:
	(Version): set to 0.9.

	* aws-status.ads:
	(Reset): new procedure.
	(Set_Multipart_Boundary): new procedure.
	(Multipart_Boundary): new function.
	(Data): parameter field is now a AWS.Parameters.Set.
	Add some comments.
	
	* aws-status.adb:
	(Multipart_Boundary): new function.
	(Parameter): complete reimplementation (more efficient now).
	(Parameter_Name): idem.
	(Reset): new procedure.
	(Set_Multipart_Boundary): new procedure.
	(Set_Parameters): complete reimplementation (more efficient now).
	(Set_Request): call to Set_Parameters to setup the form
	 parameters.
	
	* aws-server.ads:
	(Default_Upload_Path): new constant.
	(HTTP): add field Upload_Path.

	* aws-server.adb:
	(Start): set the Web_Server.Upload_Path	to the default value.

	* aws-server-protocol_handler.adb:
	(File_Upload): new procedure.
	(Value_For): new function.
	(Get_Message_Data): add some comments. Check if we have a
	 multipart form data (file upload) to handle.
	(Parse): correctly handle the Content-Type line. A Content-Type
	 can be followed by a boundary information when uploading a
	 file. Set the Multipart_Boundary if needed.
	(Protocol_Handler): reset the status data before handling a new
	 request.

	* aws-messages.ads:
	(Multipart_Form_Data): new constant.
	
2000-10-03  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-config.ads, aws-server-config.adb:
	Initial revision.

2000-10-01  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-parameters.ads, aws-parameters.adb:
	Initial revision.

2000-09-21  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server.ads:
	(Slot): removes Quit field (was not used anymore).

	* aws-server.adb:
	(Get): properly set Abortable status here. minor reformating.
	(Line): removes call to Set_Abortable.

	* aws-server-protocol_handler.adb:
	(Answer_To_Client): minor reformating.
	(Get_Message_Header): set abortable status here.
	(Protocol_Handler): remove call to Set_Abortable.

	* aws-server-get_status.adb:
	removes Quit variable (does not exist anymore).

2000-09-20  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb:
	(Send_File): close file if there is an exception raised during
	 transfert.

2000-09-16  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-mime.ads:
	Add some comments.

2000-09-11  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-client.adb:
	(Get_Host_Name): removed.
	(Port_Not_Default): new function.
	(Open_Socket): send correct "Host:" field.
	(Init_Connection): minor change to User-Agent field value.

2000-09-10  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb:
	(Header_Date_Serv): Use OS_Lib.OS_Clock instead of Calendar.Clock.

	* aws-response.adb: 
	(Acknowledge): add Content_Type string.
	Properly set the content type when message body non empty.

	* aws-response.ads:
	(Acknowledge): add Content_Type string.

2000-09-09  Pascal Obry  <p.obry@wanadoo.fr>

	* aws.ads:
	(Version): set to 0.8.2.

	* aws-client.adb:
	Minor reformating.

2000-09-07  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-session.adb: 
	(Cleaner): update Next_Run.

	* aws-server-protocol_handler.adb:
	Remove POSIX withed units, use AWS.OS_Lib instead.
	(File_Timestamp): removed.
	(Send_File_Time): new procedure.
	(Send_File_Size): new procedure.
	(Is_Valid_HTTP_Date): new function.
	(Header_Date_Serv): minor reformating.
	(Send_File): check that the HTTP date filed is correctly
	 formated. Handle correctly HEAD method (From Sune Falck).
	(Send_File): remove use of POSIX. Send file in piece instead of
	 reading and sending the whole file. Should fix problem with very
	 big file. (From Sune Falck).
	
	* aws-os_lib.ads, aws-os_lib.adb: 
	Initial revision.

2000-09-05  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb: 
	Add comments.
	Minor reformating.

2000-09-04  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb:
	(Answer_To_Client.Send_File): fix check for up-to-date file (fix
	 from Sune Falck).
	(Send_File): open file with shared=no (fix from Sune Falck).
	(Send_File.Send_File): remove a newline sent to the socket (fix
	 from Sune Falck).
	
	* aws.ads:
	(Version): set to 0.8.1.

	* aws-net-ssl.adb: 
	(Connect): minor indentation.

	* aws-server-protocol_handler.adb: 
	(Protocol_Handler): HTTP_Server parameter changed to "in out" mode.

	* aws-server.adb:
	(Protocol_Handler): HTTP_Server parameter changed to "in out" mode.

	* aws-server.ads:
	(Slot): initialize Activity_Time_Stamp.
	(Slots_Access): type removed.
	(HTTP): field slot is a protected type (was a protected access).

2000-09-02  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-session.adb: 
	(Start): new procedure.
	(Cleaner): is now a task type.
	(Cleaner_Task): a pointer to a Cleaner task.

	* aws-session.ads:
	(Start): new procedure.

	* aws-server.adb: 
	(Start): call Session.Start to start session server.

	* aws-session.adb:
	Fix some bad casing. Remove a space.

	* aws.ads: 
	(Version): set to 0.8.

	* aws-status.ads: 
	(Session): ne functions.
	(Set_Session): new procedure.
	(Data): add Session_ID field to this record.
	(No_Data): add intialization for new field Session_ID.
	
	* aws-status.adb:
	(Session): ne functions.
	(Set_Session): new procedure.

	* aws-server.ads: 
	(Keep_Open_Duration): set to 30 seconds (was 120).
	(HTTP): add Session field.

	* aws-server-protocol_handler.adb: 
	(Send_Session_Cookie): new boolean.
	(Create_Session): new procedure.
	(Header_Date_Serv): send a cookie to the client browser if needed.
	(Answer_To_Client): add code to return the AWS status page
	 logo. Call Create_Session to initialize session.
	(Parse): handle cookie.

	* aws-server-get_status.adb:
	(Session_Table): new function.
	(Slot_Table): rename all tag variable to end by _L and not _T
	(Get_Status): add tag variables LOGO and SESSION.

	* aws-messages.ads: 
	(Cookie_Token): new constant.
	(Cookie_Range): new subtype.

	* aws-session.ads, aws-session.adb: 
	Initial revision.

2000-09-01  Pascal Obry  <p.obry@wanadoo.fr>

	* aws.ads:
	(Version): set to 0.7

	* aws-server-get_status.ads: 
	Initial revision.

	* aws-server-get_status.adb: 
	Initial revision.

	* aws-server.adb:
	(Protocol_Handler): simplify prototype now that we have a
	 reference to the HTTP server (no need to drag around so much
	 data). 
	(Line): remove many variable not needed anymore.
	(Start): add Admin_URI parameter.
	
	* aws-server.ads:
	(HTTP): add the field Self to the record. It is an auto-pointer
	 (i.e. pointing to itself).
	(Start): add Admin_URI parameter.

	* aws-server-protocol_handler.adb:
	(Protocol_Handler): simplify prototype now that we have a
	 reference to the HTTP server (no need to drag around so much
	 data). Simplify the code to use the HTTP reference.

	* aws-messages.ads: 
	Fix typo.

2000-08-27  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-response.ads, aws-response.adb:
	(Acknowledge): add Message_Body parameter.

2000-08-23  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-translater.adb:
	(Decode_URL): fix a problem with null string parameter.

2000-08-14  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server-protocol_handler.adb: 
	(Get_Message_Data): do not decode URL parameters here.
	(Parameters): do not decode URL parameters here.

	* aws-server.adb: 
	remove withed unit Translater (not used anymore).

	* aws-status.adb: 
	(Parameter): decode URL parameter.

	* aws-status.ads:
	(Set_Authorization): new procedure
	(Authorization_Name): new function
	(Authorization_Password): new function
	(Data): new field Auth_Name and Auth_Password.
	
	* aws-status.adb:
	(Set_Authorization): new procedure
	(Authorization_Name): new function
	(Authorization_Password): new function
	
	* aws-server-protocol_handler.adb: 
	Handle authorization protocol.

	* aws-messages.ads: 
	Add Authorization_Token
	Sort constants in alphabetical order.

2000-08-01  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-server.adb:
	(Line): minor text message change.

	* aws-server-protocol_handler.adb:
	(Get_Message_Data): correctly detect a closed socket.
	(Get_Message_Header): idem

2000-07-28  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-net-ssl.adb: 
	(Accept_Socket): remove call to Init.
	(AWS.Net): add call to Init during elaboration of the package.

2000-07-26    Pascal Obry <p.obry@wanadoo.fr>

	* aws.ads:
	(Version): updated to 0.6
	
	* aws-net.ads:
	Fix copyright notice.
	
	* aws-server.adb:
	Fix minor typo.

2000-07-26    Pascal Obry <p.obry@wanadoo.fr>

	Integration of Dmitriy Anisimkov SSL implementation into AWS.

	* aws.ads:
	(Connection_Error): new exception.

	* aws-client.ads:
	(Post): new function.
	Fix copyright notive.

	* aws-client.adb:
	(Post): new function.
	(Init_Connection): add support for POST method
	(Open_Socket); new function.
	Fix copyright notive.

	* aws-net.ads:
	Initial revision
	
	* aws-net-ssl.adb:
	Initial revision
	
	* aws-net-std.adb:
	Initial revision

	* aws-server.ads:
	(Get): update comments
	(HTTP): add field Security.
	
	* aws-server.adb:
	Use AWS.Net
	(Line): handle security.

	* aws-server-protocol_handler.adb:
	Sock parameters is now a Socket_FD'Class.

	* aws-status.adb:
	Minor casing fix.
	
	* aws-url.ads:
	(Security): new function
	(Object): new field Security

	* aws-url.adb:
	(Parse): add support for HTTPS
	(Security): new function
	
2000-04-05    Dmitriy Anisimkov <anisimkov@iforex.net>

	* aws-client.adb:
	(Parse_Header): correctly initilialize Content_Length.
	
	* aws-connection.ads, aws-connection.adb:
	Removed not needed anymore.
	
	* aws-server.ads, aws-server.adb:
	Complete rewrite. more efficent implementation.

	* aws-server-protocol_handler.adb
	Initial revision. (most of the code here comes from AWS.Connection).

2000-04-05    Dmitriy Anisimkov <anisimkov@iforex.net>

	* aws-connection.ads:
	(Slot): add Aborted field.
	
	* aws-connection.adb:
	(Abort_Slot): new procedure
	(Line): use Abort_Slot. general cleanup.
	(Line_Cleaner): use Abort_Slot instead of Sosckets.Shutdown
	(Get_Free_Slot): idem
	
2000-04-01    Pascal Obry <p.obry@wanadoo.fr>

	* aws-client.adb, aws-connection.adb, aws-messages.adb,
	  aws-translater.adb, aws-url.adb:
	Minor reformatting to conform to -gnaty switch.
	
2000-04-01    Pascal Obry <p.obry@wanadoo.fr>
	
	* aws.ads
	(Version): changed to 0.4
	
	* aws-connection.ads:
	(Slot): moved here from the body as a limited private type. Abortable, 
	 Activity_Time_Stamp, Sock fields added.
	(Line): add access to Slot discriminant

	* aws-connection.adb:
	(Slot): moved to spec
	(Counter): rename Free to Release. Free is now a function
	 returning True if some free Slot are available.
	(Free): removed.
	(Line_Cleaner): added
	(Line): Shut down properly the sockets when needed.
	(Get_Free_Slot): try abort some line slot if there is no free one.

2000-03-10    Pascal Obry <p.obry@wanadoo.fr>

	* aws-connection.adb: 
	(Line): never exit with an exception from the outer loop in this
	task. We have a pool of Line that gets recycled.
	
2000-03-05    Pascal Obry <p.obry@wanadoo.fr>

	* aws-connection.adb:
	(line): do not send a message to the client when an exception has
	 occured since this is because the server has most certainly
	 closed the connection. (fixes from Dmitriy Anisimkov)

2000-02-14    Pascal Obry <p.obry@wanadoo.fr>

	* aws-client.adb:
	(Get): Handle status 301 (moved permanently) with Location message.
	(Read_Message): new function

	* aws-messages.ads:
	(Location_Token): new constant

	* aws-response.ads, aws-response.adb:
	(Location): new function
	
2000-02-05    Pascal Obry <p.obry@wanadoo.fr>

	* aws-clients.adb:
	(Put): new function
	(Init_Connection): new function
	(Parse_Header): new function
	(Get): reorganized - use Init_Connection to Parse_Header

	* aws-clients.ads:
	(Put): new function

	* aws-messages.ads:
	(Head_Token): new constant
	(Form_Data): new constant
	(Content_Length): parameter changed from Positive to Natural
	(Www-Authenticate): new function
	
	* aws-messages.adb:
	(Content_Length): parameter changed from Positive to Natural
	(Www-Authenticate): new function
	
	* aws-response.ads:
	(Data_Mode): add Header to the enumeration
	(Content_Length): parameter changed from Positive to Natural
	(Acknowledge): new function
	
	* aws-response.adb:
	(Content_Length): parameter changed from Positive to Natural
	(Acknowledge): new function
	
	* aws-status.ads, aws-status.adb:
	(Set_Parameter): new function with Stream_Element_Array data
	(Set_Content_Type): new function
	(Content_Type): new function
	(Binary_Data): new function
	
	* aws-connection.adb:
	A lot of changes to handle PUT method and handle POST method with
	binary data.
	
2000-02-04    Pascal Obry <p.obry@wanadoo.fr>

	* aws-clients.adb:
	(Get_Host_Name): new function use to get the host name to send to
	the server.

	* aws-messages.adb:
	(Weekday): fix minor bug (use local var for time) 
	[patch from Sune Falck]

2000-01-24    Pascal Obry <p.obry@wanadoo.fr>

	* aws.ads:
	(Internal_Error): exception added.
	
	* aws-client.adb:
	(Get): Fix sockets interface to use the UNIX compliant one.

	* aws-connection.adb:
	(Internal_Error): exception removed.
	
	* aws-messages.adb:
	(Status_Code_Image): new type to handle 3 digits status code
	(Status_Data): Code is now a Status_Code_Image
	(Status_Messages): change declaration to match new design.

2000-01-24    Sune Falck <Sune.Falck@swipnet.se>

	* aws-messages.adb:
	Changed Image to handle Natural instead of Positive, gave
	constraint_error for 0 in seconds and minutes. Image now returns a
	leading zero for numbers with only one digit so that time and day
	representation will be correct. Changed Month_Name to an array
	instead of a function. Changed Month_Number to use the array
	Month_Name. Added function Weekday.

2000-01-22    Pascal Obry <p.obry@wanadoo.fr>

	* aws*.ad[sb]: this is to be considered the first version of AWS

2000-01-16    Pascal Obry <p.obry@wanadoo.fr>
	
	* aws*.ad[sb]: this is the very first release.
