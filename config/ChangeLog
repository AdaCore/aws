2004-09-23  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__gnat.adb:
	(Get_Addr_Info): Use GAI_StrError in error handling.

	* src/check_config.c:
	Replace linker options -lpoll and -lwspiapi to -laws-win32.
	(EAI_SYSTEM): New constant.
	(GAI_StrError): New routine definition.

2004-09-22  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__gnat.adb:
	(Errno): New routine.
	(Connect): Implement timeout.

2004-09-21  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	Generate call to WSPIAPI_init in elaboration for wspiapi.h static data
	 initialization.

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	Remove dummy call to OSD.GetAddrInfo and OSD.FreeAddrInfo.

2004-09-21  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	Fix segmentation fault on Solaris and FreeBSD. Do not call
	 OSD.FreeAddrInfo with null pointer.

2004-09-21  Pascal Obry  <pascal@obry.org>

	* src/check_config.c:
	Back out previous change as it is not ok on FreeBSD after all.

2004-09-21  Pascal Obry  <pascal@obry.org>

	* src/check_config.c:
	Include <sys/types.h> to fix build failure on FreeBSD.

2004-09-20  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	Timeout on connect.

2004-09-19  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	(CVS_ID): Define for CVS macro to put the comment to the
	 generated file.

2004-09-17  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	Add IPPROTO_TCP constant, not defined in AdaSockets.
	Use linker option -lws2_32 in Win32 anyway to link with AdaSockets.

	* aws-net-std__adasockets.adb:
	(Get_Addr_Info): New routine.
	(Bind): Use Get_Addr_Info routine together with Thin.C_Bind.
	 Catch exception only on socket creation.
	(Connect): Use Get_Addr_Info routine together with Thin.C_Connect.
	 Catch exception only on socket creation.
	Dummy call to FreeAddrInfo in the package initialization, for
	 initialize internal libwspiapi.a static data.

2004-09-17  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Pending): New routine.

2004-09-16  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	Move here GetAddrInfo and FreeAddrInfo routines from AWS.Net.Thin.
	Add Windows 2000 support.

	* aws-net-std__gnat.adb:
	FreeAddrInfo use Addr_Info_Access parameter now.
	Dummy call to FreeAddrInfo in the package initialization, for
	 initialize internal libwspiapi.a static data.
	Use AWS.OS_Lib.Definitions instead of AWS.Net.Thin.

2004-09-15  Pascal Obry  <pascal@obry.org>

	* aws-net-std__gnat.adb:
	(Raise_Socket_Error): Add code to support GNAT 5.02 and 5.03
	 compilers. Both have a different spec for the routine
	 GNAT.Sockets.Thin.Socket_Error_Message. This fixes AWS build
	 failure on GNAT 5.03, thanks to Ada overloading.
	Minor reformatting.

2004-09-15  Pascal Obry  <pascal@obry.org>

	* aws-net-std__gnat.adb:
	(Raise_Socket_Error): Add missing parameter mode.

2004-09-15  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	Add comment header for Addr_Info.
	Fix typo in comment.
	(AI_PASSIVE): New constant.
	(AI_CANONNAME): New constant.
	(AI_NUMERICHOST): New constant.
	Add pragma Linker_Options for Win32 platform.

	* aws-net-std__gnat.adb:
	(Get_Inet_Addr): Removed.
	(Get_Addr_Info): New routine.
	(Raise_Socket_Error): New routine.
	(Bind): Use Get_Addr_Info routine together with Thin.C_Bind.
	 Catch exception only on socket creation.
	(Connect): Use Get_Addr_Info routine together with Thin.C_Connect.
	 Catch exception only on socket creation.
	(Send): Use Raise_Socket_Error.

2004-09-14  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	(Addr_Info): Add pragma Convention.

2004-09-13  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* src/check_config.c:
	(Addr_Info): Ada bind to addrinfo C record. Need to be generated
	 because Linux has a different fields order then in other platforms.

2004-08-10  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Send): Add Last out parameter. Change implementation.

2004-07-23  Pascal Obry  <pascal@obry.org>

	* src/check_config.c:
	Initial revision.
	Used to get some definitions from the OS include files.

	* makefile:
	(setup): Add aws-os_lib-definitions.ads.
	(aws-os_lib-definitions.ads): New target.
	(clean): Remove test_uconv and check_config.

2004-05-26  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Receive): Change from function to procedure.

2004-04-12  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Set_Non_Blocking_Mode): New routine.
	(Set_Blocking_Mode): Removed.
	(Accept_Socket): Check for timeout. Make New_Socket non-blocking.
	(Bind): Make just created socket non-blocking.
	(Connect): Make connected socket non-blocking.

2004-04-06  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-net-std__gnat.adb:
	(Send): Properly handle the case where all data are not sent
	 in one chunk.
	Fix from Thomas Quinot.

2004-04-05  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Wait_Mode): Moved to aws-net.adb.
	(Wait_For): Moved to aws-net.adb.
	(Wait_Mode): Read/Write -> Input/Output.

2004-03-09  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Bind): Catch Sockets.Naming.Naming_Error too.
	(Connect): Idem.

2004-03-09  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Accept_Socket): Catch only Sockets.Socket_Error.
	(Bind): Catch only Sockets.Socket_Error.
	(Connect): Don't shutdown socket if socket creation was failed.
	 catch only Sockets.Connection_Refused and Sockets.Socket_Error.
	(Listen): Catch only Sockets.Socket_Error.

	* aws-net-std__gnat.adb:
	(Accept_Socket): Catch only Sockets.Socket_Error.
	(Bind): Catch only Sockets.Socket_Error and Sockets.Host_Error.
	(Connect): Don't shutdown socket if socket creation was failed.
	 catch only Sockets.Host_Error and Sockets.Socket_Error.
	(Get_Receive_Buffer_Size): Catch Sockets.Socket_Error.
	(Get_Send_Buffer_Size): Idem.
	(Listen): Idem.
	(Peer_Addr): Idem.
	(Receive): Idem.
	(Send): Idem.
	(Set_Blocking_Mode): Idem.

2004-03-01  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Errno): New routine.

2004-01-14  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-os_lib__gnat.adb:
	(For_Every_Directory_Entry): End_Slash renamed Get_Directory.

	* aws-os_lib__posix.adb:
	(For_Every_Directory_Entry): Internal call to Is_Directory is with
	 a full pathname now, because directory iterator could be not only
	 in the current directory.

2004-01-13  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-os_lib__gnat.adb:
	(For_Every_Directory_Entry): Internal call to Is_Directory is with
	 a full pathname now, because directory iterator could be not only
	 in the current directory.

2004-01-12  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb, aws-net-std__gnat.adb:
	(Get_Send_Buffer): Renamed to Get_Send_Buffer_Size.
	(Get_Receive_Buffer): Renamed to Get_Receive_Buffer_Size.
	(Set_Send_Buffer): Renamed to Set_Send_Buffer_Size.
	(Set_Receive_Buffer): Renamed to Set_Receive_Buffer_Size.

	* aws-net-std__adasockets.adb:
	(Send): Use Get_Send_Buffer_Size.

2004-01-11  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Get_Send_Buffer): Moved to specification.
	(Get_Receive_Buffer): New routine.

	* aws-net-std__gnat.adb:
	Update copyright years.
	(Get_Send_Buffer): New routine.
	(Get_Receive_Buffer): New routine.

2004-01-09  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	Update copyright years.
	(Wait_For): Check to do not overflow on too big timeout.

2004-01-08  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Wait_For): Use Ada enumerator Wait_Mode instead of C.int.
	(Send): Check for timeout before each internal write buffer.
	(Get_Send_Buffer): New routine.
	(Raise_Exception): New routine.

	* aws-net-std__gnat.adb:
	(Send): Raise Socket_Error if not all data written.

2004-01-07  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__adasockets.adb:
	(Wait_For): New routine.
	(Receive): Use Wait_For for timeout control.
	(Send): Idem.

2004-01-07  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-net-std__gnat.adb, aws-net-std__adasockets.adb:
	(Socket_Hidden): Put original socket inside record. It is for shorter
	 access (Socket.S.FD instead of SFD (Socket.S.all)) and prepear place
	 for Socket_Set_Type for timeout implementation.

2004-01-01  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-os_lib__gnat.adb:
	Fix typo in comment.
        Update copyright notice.

2003-11-25  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-os_lib__posix.adb:
	(Base_Name): New routine.
	(File_Extension): Idem.
	(File_Name): Idem.
	(For_Every_Directory_Entry): Idem.
	Put routines in alphabetical order.
	Reformat code.
	Update copyright notice.

	* aws-os_lib__gnat.adb:
	(Dir_Type_Hidden): Removed.
	(G_Dir_Type): Removed.
	(Close): Idem.
	(For_Every_Directory_Entry): New routine. Generic iterator instead
	 of the Open/Read/Close. Cleaner, code is simpler.
	(Open): Removed.
	(Read): Idem.
	Minor reformatting.

2003-11-17  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-os_lib__gnat.adb:
	(Open): New procedure.
	(Read): Idem.
	(Close): Idem.
	(Base_Name): Idem.
	(File_Extension): Idem.
	(File_Name): Idem.
	Part of work for ObjectAda compatibility.

2003-11-07  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-os_lib__gnat.adb:
	Minor comment fix.
	Minor reformatting.
	Update copyright notice.

2003-11-07  Dmitriy Anisimkov <anisimkov@yahoo.com>

	* aws-os_lib__gnat.adb:
	(Max_Path): New constant.
	(Is_Directory): Test for path length before call GNAT routine.
	(Is_Regular_File): Idem.

2003-10-29  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-translator-conversion__p.adb, aws-translator-conversion__f.adb:
	Fix typo in comment.
	Minor reformatting.

2003-10-01  Pascal Obry  <p.obry@wanadoo.fr>

	* makefile:
	Use GNATMAKE_FOR_HOST to build test_uconv. Support for cross-compilers.

	* aws-net-std__gnat.adb:
	(Shutdown): Add handler for Constraint_Error. This is continued
	 work for fix checked-in on 2003-07-15. Again this is really a
	 workaround.

2003-08-02  Pascal Obry  <p.obry@wanadoo.fr>

	* makefile:
	Use variable instead of directly calling tools.

2003-08-02  Pascal Obry  <p.obry@wanadoo.fr>

	* makefile:
	Add section to build AWS based on project files.
	(gbuild): New target.
	(gclean): Idem.
	(gsetup): Idem.

2003-07-18  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-net-std__gnat.adb:
	Minor reformatting.

2003-07-15  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-net-std__gnat.adb:
	(Shutdown): Add exception handling around Close_Socket. In some
	 cases (not really clear) the socket file descriptor is wrong and
	 this routine returns EBAF. This must be considered as a
	 workaround and analysed more deeply later.

2003-07-07  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-net-std__gnat.adb:
	(Receive): Fix type in message string.

2003-06-21  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-soap__nosoap.ads, aws-soap__nosoap.adb:
	Removed, not used. The new scheme is to use dispatchers.

	* aws-soap__soap.ads, aws-soap__soap.adb:
	Removed, not used. The new scheme is to use dispatchers.

2003-06-18  Pascal Obry  <p.obry@wanadoo.fr>

	* aws-soap__soap.ads, aws-soap__soap.adb:
	Initial revision.

	* aws-soap__nosoap.ads, aws-soap__nosoap.adb:
	Initial revision.

2003-05-29  Anisimkov Dmitriy <anisimkov@yahoo.com>

	* src/test_uconv.adb:
	Fix suffixes __p and __f.

2003-05-06  Pascal Obry  <p.obry@wanadoo.fr>

	* src/test_uconv.adb:
	Moved (and renamed) from ../src.

	* aws-translator-conversion__f.adb, aws-translator-conversion__p.adb:
	Moved (and renamed) from ../src.

	* makefile:
	Initial revision.

	* aws-os_lib__gnat.adb, aws-os_lib__posix.adb,
          aws-os_lib__adasockets.adb:
	Moved (and renamed) from ../include.

	* aws-net-std__gnat.adb, aws-net-std__adasockets.adb:
	Moved (and renamed) from ../include.
